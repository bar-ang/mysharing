<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bootstrapping Dictionary</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>


    <script language="JavaScript">
        var app = angular.module("dictionary", []);
        app.controller("myCtrl", function($scope, $http){
            $http.get("tdb.txt").then(function(response){
                $scope.entries = response.data;
            }, function error(response){
                $scope.error = "Error.";
            });

            $scope.addEntry = function($http){

              var ans = "no";

              var query = "?";
              query += "word=" + $scope.newWord;
              query += "&mean=" + $scope.newMean;
              query += "&trans=" + $scope.newTrans;
              query += "&eng=" + $scope.newEng;
              $http.get("proc.nf" + query).then(function(response){
                ans = response.data;
              }, function error(response){
                $scope.error = "Error.";
              });

              if(ans != "OK"){
                $scope.error = ans;
                return;
              }

             $scope.entries.push({
                "word":$scope.newWord,
                "mean":$scope.newMean,
                "trans":$scope.newTrans,
                "eng":$scope.newEng
              });

               $scope.newWord="";
               $scope.newMean="";
               $scope.newTrans="";
               $scope.newEng="";

               $scope.error = "All Good";
            }
        });
    </script>



</head>
<body>


    <div ng-app="dictionary" ng-controller="myCtrl">
       <table border="1">
           <th></th>
           <th>Word</th>
           <th>Meaning</th>
           <th>Translate</th>
           <th>Engllish Equiv.</th>
           <th></th>

           <tr ng-repeat="entry in entries">
               <td>{{ $index }}</td>
               <td>{{ entry.word }}</td>
               <td>{{ entry.mean }}</td>
               <td>{{ entry.trans }}</td>
               <td>{{ entry.eng }}</td>
               <td><input type="button" ng-model="btnAdd" ng-click="edit" value="Edit" /></td>
           </tr>
           <tr>
               <td></td>
               <td><input type="text" ng-model="newWord" placeholder="Add a new word" /> </td>
               <td><input type="text" ng-model="newMean" /></td>
               <td><input type="text" ng-model="newTrans" /></td>
               <td><input type="text" ng-model="newEng" /></td>
               <td><input type="button" ng-model="btnAdd" ng-click="addEntry()" value="Add" /></td>
           </tr>
       </table>
      {{ error }}
    </div>
    <img src="chinese.png" />
</body>
</html>